<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>비밀번호 재설정 - Kalpha</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <div class="auth-card animate-fade-in-up">
            <div class="auth-header">
                <h1 class="logo hover-bounce">
                    <a href="index.html" style="color: inherit; text-decoration: none;">
                        <i class="fas fa-rocket"></i>
                        Kalpha
                    </a>
                </h1>
                <h2>비밀번호를 재설정하세요</h2>
                <p>가입 시 사용한 이메일 주소를 입력해주세요. 비밀번호 재설정 링크를 보내드립니다.</p>
            </div>
            
            <!-- Step 1: Email Input -->
            <div class="reset-step active" id="step1">
                <form id="emailForm" class="auth-form">
                    <div class="form-group">
                        <label for="resetEmail">이메일 주소</label>
                        <div class="input-group">
                            <i class="fas fa-envelope"></i>
                            <input type="email" id="resetEmail" name="email" placeholder="이메일을 입력하세요" required>
                        </div>
                        <span class="error-message" id="emailError"></span>
                    </div>
                    
                    <button type="submit" class="btn-primary" id="sendCodeBtn">
                        <i class="fas fa-paper-plane"></i>
                        재설정 링크 보내기
                    </button>
                </form>
                
                <div class="auth-footer">
                    <p>로그인 페이지로 돌아가기 <a href="sign_in.html">로그인</a></p>
                </div>
            </div>
            
            <!-- Step 2: Code Verification -->
            <div class="reset-step" id="step2">
                <div class="step-info">
                    <div class="step-icon">
                        <i class="fas fa-envelope-open"></i>
                    </div>
                    <h3>인증 코드를 확인하세요</h3>
                    <p>
                        <span id="sentEmail">example@email.com</span>으로<br>
                        6자리 인증 코드를 보냈습니다.
                    </p>
                </div>
                
                <form id="codeForm" class="auth-form">
                    <div class="form-group">
                        <label for="verificationCode">인증 코드</label>
                        <div class="code-input-group">
                            <input type="text" class="code-input" maxlength="1" data-index="0">
                            <input type="text" class="code-input" maxlength="1" data-index="1">
                            <input type="text" class="code-input" maxlength="1" data-index="2">
                            <input type="text" class="code-input" maxlength="1" data-index="3">
                            <input type="text" class="code-input" maxlength="1" data-index="4">
                            <input type="text" class="code-input" maxlength="1" data-index="5">
                        </div>
                        <span class="error-message" id="codeError"></span>
                    </div>
                    
                    <button type="submit" class="btn-primary" id="verifyCodeBtn">
                        <i class="fas fa-check"></i>
                        인증 코드 확인
                    </button>
                </form>
                
                <div class="resend-section">
                    <p>코드를 받지 못하셨나요?</p>
                    <button type="button" class="btn-link" id="resendCodeBtn" disabled>
                        <span id="resendTimer">60</span>초 후 재전송 가능
                    </button>
                </div>
                
                <div class="auth-footer">
                    <button type="button" class="btn-link" onclick="goToStep(1)">
                        <i class="fas fa-arrow-left"></i>
                        다른 이메일 사용
                    </button>
                </div>
            </div>
            
            <!-- Step 3: New Password -->
            <div class="reset-step" id="step3">
                <div class="step-info">
                    <div class="step-icon">
                        <i class="fas fa-key"></i>
                    </div>
                    <h3>새 비밀번호를 설정하세요</h3>
                    <p>안전한 비밀번호로 계정을 보호하세요.</p>
                </div>
                
                <form id="passwordForm" class="auth-form">
                    <div class="form-group">
                        <label for="newPassword">새 비밀번호</label>
                        <div class="input-group">
                            <i class="fas fa-lock"></i>
                            <input type="password" id="newPassword" name="password" placeholder="새 비밀번호를 입력하세요" required>
                            <button type="button" class="toggle-password" onclick="togglePassword('newPassword')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="password-strength">
                            <div class="strength-meter">
                                <div class="strength-bar" id="strengthBar"></div>
                            </div>
                            <span class="strength-text" id="strengthText"></span>
                        </div>
                        <span class="error-message" id="passwordError"></span>
                    </div>
                    
                    <div class="form-group">
                        <label for="confirmPassword">비밀번호 확인</label>
                        <div class="input-group">
                            <i class="fas fa-lock"></i>
                            <input type="password" id="confirmPassword" name="confirmPassword" placeholder="비밀번호를 다시 입력하세요" required>
                            <button type="button" class="toggle-password" onclick="togglePassword('confirmPassword')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <span class="error-message" id="confirmPasswordError"></span>
                    </div>
                    
                    <div class="password-requirements">
                        <h4>비밀번호 요구사항:</h4>
                        <ul>
                            <li id="req-length" class="requirement">
                                <i class="fas fa-times"></i>
                                최소 8자 이상
                            </li>
                            <li id="req-uppercase" class="requirement">
                                <i class="fas fa-times"></i>
                                대문자 포함
                            </li>
                            <li id="req-lowercase" class="requirement">
                                <i class="fas fa-times"></i>
                                소문자 포함
                            </li>
                            <li id="req-number" class="requirement">
                                <i class="fas fa-times"></i>
                                숫자 포함
                            </li>
                            <li id="req-special" class="requirement">
                                <i class="fas fa-times"></i>
                                특수문자 포함
                            </li>
                        </ul>
                    </div>
                    
                    <button type="submit" class="btn-primary" id="resetPasswordBtn" disabled>
                        <i class="fas fa-save"></i>
                        비밀번호 재설정
                    </button>
                </form>
            </div>
            
            <!-- Step 4: Success -->
            <div class="reset-step" id="step4">
                <div class="success-content">
                    <div class="success-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h3>비밀번호가 재설정되었습니다!</h3>
                    <p>새 비밀번호로 로그인하실 수 있습니다.</p>
                    
                    <div class="success-actions">
                        <a href="sign_in.html" class="btn-primary">
                            <i class="fas fa-sign-in-alt"></i>
                            로그인하기
                        </a>
                        <a href="index.html" class="btn-secondary">
                            <i class="fas fa-home"></i>
                            홈으로 가기
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Loading Modal -->
    <div id="loadingModal" class="modal">
        <div class="modal-content loading-content">
            <div class="loading-spinner">
                <i class="fas fa-spinner fa-spin"></i>
            </div>
            <h3 id="loadingText">처리 중...</h3>
            <p id="loadingSubtext">잠시만 기다려주세요.</p>
        </div>
    </div>
    
    <!-- Error Modal -->
    <div id="errorModal" class="modal">
        <div class="modal-content error-content">
            <div class="modal-header">
                <i class="fas fa-exclamation-triangle error-icon"></i>
                <h3>오류 발생</h3>
            </div>
            <div class="modal-body">
                <p id="errorMessage">처리 중 오류가 발생했습니다.</p>
            </div>
            <div class="modal-footer">
                <button class="btn-primary" onclick="closeModal('errorModal')">확인</button>
            </div>
        </div>
    </div>
    
    <script src="js/auth.js"></script>
    <script src="js/forgot-password.js"></script>
    
    <style>
        /* Additional styles for forgot password page */
        .reset-step {
            display: none;
        }
        
        .reset-step.active {
            display: block;
        }
        
        .step-info {
            text-align: center;
            margin-bottom: var(--spacing-xl);
        }
        
        .step-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto var(--spacing-lg);
        }
        
        .step-icon i {
            font-size: var(--font-size-2xl);
            color: white;
        }
        
        .step-info h3 {
            color: var(--text-primary);
            margin-bottom: var(--spacing-sm);
        }
        
        .step-info p {
            color: var(--text-secondary);
            line-height: 1.6;
        }
        
        .code-input-group {
            display: flex;
            gap: var(--spacing-sm);
            justify-content: center;
            margin: var(--spacing-md) 0;
        }
        
        .code-input {
            width: 50px;
            height: 60px;
            border: 2px solid var(--border-color);
            border-radius: var(--radius-lg);
            text-align: center;
            font-size: var(--font-size-xl);
            font-weight: 600;
            transition: all var(--transition-fast);
        }
        
        .code-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }
        
        .code-input.filled {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .resend-section {
            text-align: center;
            margin-top: var(--spacing-lg);
            padding-top: var(--spacing-lg);
            border-top: 1px solid var(--border-color);
        }
        
        .resend-section p {
            margin-bottom: var(--spacing-sm);
            color: var(--text-secondary);
            font-size: var(--font-size-sm);
        }
        
        .btn-link {
            background: none;
            border: none;
            color: var(--primary-color);
            font-size: var(--font-size-sm);
            cursor: pointer;
            text-decoration: underline;
            transition: color var(--transition-fast);
        }
        
        .btn-link:hover:not(:disabled) {
            color: var(--primary-dark);
        }
        
        .btn-link:disabled {
            color: var(--text-muted);
            cursor: not-allowed;
            text-decoration: none;
        }
        
        .password-requirements {
            background: var(--background-secondary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            margin: var(--spacing-lg) 0;
        }
        
        .password-requirements h4 {
            font-size: var(--font-size-sm);
            color: var(--text-primary);
            margin-bottom: var(--spacing-md);
        }
        
        .password-requirements ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }
        
        .requirement {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-xs);
            font-size: var(--font-size-sm);
            color: var(--text-secondary);
            transition: color var(--transition-fast);
        }
        
        .requirement.met {
            color: var(--success-color);
        }
        
        .requirement i {
            width: 16px;
            color: var(--error-color);
            transition: color var(--transition-fast);
        }
        
        .requirement.met i {
            color: var(--success-color);
        }
        
        .requirement.met i::before {
            content: "\f00c"; /* fa-check */
        }
        
        .success-content {
            text-align: center;
        }
        
        .success-icon {
            font-size: 4rem;
            color: var(--success-color);
            margin-bottom: var(--spacing-lg);
        }
        
        .success-content h3 {
            color: var(--text-primary);
            margin-bottom: var(--spacing-md);
        }
        
        .success-content p {
            color: var(--text-secondary);
            margin-bottom: var(--spacing-xl);
        }
        
        .success-actions {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
        }
        
        .auth-footer {
            margin-top: var(--spacing-xl);
            text-align: center;
        }
        
        .auth-footer p {
            font-size: var(--font-size-sm);
            margin-bottom: var(--spacing-sm);
        }
        
        @media (max-width: 480px) {
            .code-input {
                width: 40px;
                height: 50px;
                font-size: var(--font-size-lg);
            }
            
            .success-actions {
                flex-direction: column;
            }
        }
    </style>
</body>
</html>